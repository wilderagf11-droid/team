<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#f6e8f0" />
  <title>Invitaci√≥n | Revelaci√≥n de Sexo</title>
  <style>
    :root{
      --w: 1024;
      --h: 1792;
      --ratio: calc(var(--w) / var(--h));
      --shadow: 0 20px 60px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: #f6eef3;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      -webkit-tap-highlight-color: transparent;
    }

    /* CONTENEDOR que mantiene proporci√≥n 1024x1792 (como tu imagen) */
    .stage{
      position:relative;
      width:min(96vw, calc(96vh * var(--ratio)));
      height:calc(min(96vw, calc(96vh * var(--ratio))) / var(--ratio));
      border-radius: 22px;
      overflow:hidden;
      box-shadow: var(--shadow);
      background:#fff;
    }

    /* Imagen exacta de fondo */
    .bg{
      position:absolute; inset:0;
      background: url("fondo-ositos.png") center/cover no-repeat;
    }

    /* Capa de ‚Äúpantalla inicial‚Äù (solo para el click de Abrir Invitaci√≥n) */
    .gate{
      position:absolute; inset:0;
      z-index: 30;
      pointer-events:auto;
      display:block;
    }
    .gate.hidden{
      pointer-events:none;
      opacity:0;
      transition: opacity .35s ease;
    }

    /* Capa principal (botones ya funcionando) */
    .live{
      position:absolute; inset:0;
      z-index: 20;
      pointer-events:auto;
    }

    /* Hotspots: botones invisibles encima de los botones de la imagen */
    .hotspot{
      position:absolute;
      border-radius: 999px;
      background: rgba(255,255,255,0); /* invisible */
      border: 0;
      padding:0;
      cursor:pointer;
      touch-action: manipulation;
    }
    .hotspot:active{ transform: translateY(1px) scale(.995); }

    /* Efecto visual al tocar (brillito + ripple) */
    .pulse{
      position:absolute;
      inset:-40%;
      background: radial-gradient(circle at var(--x,50%) var(--y,50%), rgba(255,255,255,.55), transparent 55%);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease;
    }
    .hotspot.showPulse .pulse{ opacity:1; }

    .ripple{
      position:absolute;
      border-radius:999px;
      transform: scale(0);
      opacity:.40;
      animation: rip 520ms ease-out forwards;
      pointer-events:none;
      background: radial-gradient(circle, rgba(255,255,255,.65), transparent 65%);
    }
    @keyframes rip{
      to{ transform: scale(1); opacity: 0; }
    }

    /* Contador real (texto encima del contador de la imagen) */
    .countdownText{
      position:absolute;
      z-index: 25;
      width: 52%;
      left: 24%;
      top: 69.2%;
      text-align:left;
      font-weight: 800;
      letter-spacing:.2px;
      font-size: clamp(10px, 2.15vw, 18px);
      color: rgba(88,106,140,.95);
      text-shadow:
        0 1px 0 rgba(255,255,255,.75),
        0 6px 18px rgba(0,0,0,.10);
      pointer-events:none;
      user-select:none;
    }

    /* Lluvia (globos/corazones) */
    .rainLayer{
      position:absolute; inset:0;
      z-index: 40;
      pointer-events:none;
      overflow:hidden;
    }
    .drop{
      position:absolute;
      top:-60px;
      animation: fall linear forwards;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.20));
      opacity:.98;
      will-change: transform;
    }
    @keyframes fall{
      to{
        transform: translateY(calc(100% + 160px)) rotate(var(--rot)) scale(var(--sc));
        opacity: 1;
      }
    }

    /* Modal de regalos (se abre tocando ‚ÄúTe esperamos‚Äù) */
    .modal{
      position:absolute; inset:0;
      z-index: 60;
      background: rgba(0,0,0,.35);
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding: 12px;
      backdrop-filter: blur(6px);
    }
    .modal.open{ display:flex; }
    .sheet{
      width: min(520px, 100%);
      background: rgba(255,255,255,.92);
      border-radius: 22px;
      padding: 14px 14px 12px;
      box-shadow: 0 30px 80px rgba(0,0,0,.25);
      color:#2b2b2b;
    }
    .sheet h3{
      margin: 0 0 6px;
      font-size: 18px;
      letter-spacing:.2px;
    }
    .sheet p{
      margin:0 0 10px;
      font-size: 13.5px;
      color:#4b4b4b;
    }
    .sheet ul{
      margin:0;
      padding-left: 18px;
      font-size: 14px;
      line-height:1.5;
    }
    .sheet .close{
      margin-top: 12px;
      width:100%;
      border:0;
      border-radius: 16px;
      padding: 12px 12px;
      font-weight: 900;
      background: linear-gradient(180deg, #ffd3e8, #ffe9f4);
      cursor:pointer;
    }

    /* Bot√≥n invisible para abrir regalos (zona ‚ÄúTe esperamos‚Äù) */
    .giftHotspot{
      position:absolute;
      z-index: 26;
      left: 22%;
      top: 82.2%;
      width: 56%;
      height: 5.8%;
      border-radius: 18px;
      background: rgba(255,255,255,0);
      border:0;
      cursor:pointer;
    }

    /* Para accesibilidad */
    .sr{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; }
  </style>
</head>

<body>
  <div class="stage" id="stage">
    <div class="bg" aria-hidden="true"></div>

    <!-- capa lluvia -->
    <div class="rainLayer" id="rainLayer"></div>

    <!-- TEXTO contador real encima del contador de la imagen -->
    <div class="countdownText" id="countdownText">‚è≥ Faltan -- d√≠as --h --m --s</div>

    <!-- Hotspot para abrir modal de regalos tocando ‚ÄúTe esperamos‚Äù -->
    <button class="giftHotspot" id="giftHotspot" aria-label="Ver ideas de regalos"></button>

    <!-- Pantalla inicial: SOLO el bot√≥n ‚ÄúAbrir Invitaci√≥n‚Äù (zona del bot√≥n rosa grande en la imagen) -->
    <div class="gate" id="gate">
      <button class="hotspot" id="openInvite"
        aria-label="Abrir invitaci√≥n"
        style="
          left: 16%;
          top: 10.9%;
          width: 68%;
          height: 6.9%;
        ">
        <span class="pulse"></span>
        <span class="sr">Abrir invitaci√≥n</span>
      </button>
    </div>

    <!-- Capa activa (botones funcionando) -->
    <div class="live" id="live">
      <!-- Team Boy (bot√≥n azul) -->
      <button class="hotspot" id="btnBoy"
        aria-label="Team Boy"
        style="left: 24.5%; top: 74.7%; width: 25.5%; height: 4.7%;">
        <span class="pulse"></span>
      </button>

      <!-- Team Girl (bot√≥n rosado) -->
      <button class="hotspot" id="btnGirl"
        aria-label="Team Girl"
        style="left: 50.5%; top: 74.7%; width: 25.5%; height: 4.7%;">
        <span class="pulse"></span>
      </button>

      <!-- C√≥mo llegar (bot√≥n verde) -->
      <button class="hotspot" id="btnMaps"
        aria-label="C√≥mo llegar"
        style="left: 24.5%; top: 79.6%; width: 25.5%; height: 4.7%;">
        <span class="pulse"></span>
      </button>

      <!-- Confirmar asistencia (bot√≥n naranja) -->
      <button class="hotspot" id="btnRsvp"
        aria-label="Confirmar asistencia por WhatsApp"
        style="left: 50.5%; top: 79.6%; width: 25.5%; height: 4.7%;">
        <span class="pulse"></span>
      </button>
    </div>

    <!-- Modal regalos -->
    <div class="modal" id="modal">
      <div class="sheet" role="dialog" aria-modal="true" aria-label="Ideas de regalos">
        <h3>üéÅ Ideas de regalos</h3>
        <p>Si deseas llevar un detalle, aqu√≠ van algunas ideas:</p>
        <ul id="giftList"></ul>
        <button class="close" id="closeModal">Cerrar ‚ú®</button>
      </div>
    </div>
  </div>

  <script>
    /**********************
     * CONFIG
     **********************/
    // Fecha evento (aj√∫stala si es necesario)
    // Ejemplo: 2026-03-07T15:00:00
    const EVENT_DATE = "2026-03-07T15:00:00";

    // WhatsApp RSVP
    const RSVP_PHONE = "+16294628232";
    const RSVP_MESSAGE = "Hola! ‚úÖ Confirmo mi asistencia a la revelaci√≥n de sexo. ¬øA qu√© hora debo llegar?";

    // Link Maps (pon aqu√≠ tu ubicaci√≥n real)
    const MAPS_URL = "https://www.google.com/maps/search/?api=1&query=Ubicaci%C3%B3n%20del%20evento";

    // Regalos con emoji (como pediste)
    const GIFTS = [
      "üß∑ Pa√±ales (cualquier talla)",
      "üçº Biberones o accesorios",
      "üß¥ Toallitas h√∫medas",
      "üß∏ Ropita 0‚Äì3 meses",
      "üõÅ Kit de ba√±o para beb√©",
      "üß∫ Mantas o muselinas",
      "üß¥ Crema/aceite para beb√©",
      "üß∏ Peluche suave"
    ];

    /**********************
     * AUDIO click (compatible iPhone/Android)
     * Se activa SOLO despu√©s del primer toque (restricci√≥n iOS).
     **********************/
    let audioUnlocked = false;
    let audioCtx = null;

    function unlockAudio(){
      if (audioUnlocked) return;
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      // ‚Äúwarm up‚Äù
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      g.gain.value = 0.0001;
      o.connect(g); g.connect(audioCtx.destination);
      o.start(); o.stop(audioCtx.currentTime + 0.01);
      audioUnlocked = true;
    }

    function clickSound(){
      if (!audioUnlocked || !audioCtx) return;
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = "sine";
      o.frequency.setValueAtTime(880, audioCtx.currentTime);
      g.gain.setValueAtTime(0.0001, audioCtx.currentTime);
      g.gain.exponentialRampToValueAtTime(0.18, audioCtx.currentTime + 0.01);
      g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.12);
      o.connect(g); g.connect(audioCtx.destination);
      o.start();
      o.stop(audioCtx.currentTime + 0.13);
    }

    /**********************
     * FX: ripple + pulse
     **********************/
    function glow(el, ev){
      const rect = el.getBoundingClientRect();
      const x = ((ev.clientX ?? (rect.left+rect.width/2)) - rect.left) / rect.width * 100;
      const y = ((ev.clientY ?? (rect.top+rect.height/2)) - rect.top) / rect.height * 100;
      el.style.setProperty("--x", x + "%");
      el.style.setProperty("--y", y + "%");
      el.classList.add("showPulse");
      setTimeout(()=> el.classList.remove("showPulse"), 220);
    }

    function ripple(el, ev){
      const rect = el.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height) * 1.8;
      const r = document.createElement("span");
      r.className = "ripple";
      r.style.width = r.style.height = size + "px";
      const x = (ev.clientX - rect.left) - size/2;
      const y = (ev.clientY - rect.top) - size/2;
      r.style.left = x + "px";
      r.style.top  = y + "px";
      el.appendChild(r);
      setTimeout(()=> r.remove(), 560);
    }

    function bindTap(el, handler){
      el.addEventListener("click", (ev)=>{
        unlockAudio();
        clickSound();
        glow(el, ev);
        ripple(el, ev);
        handler(ev);
      }, {passive:true});
    }

    /**********************
     * Lluvia globos/corazones
     **********************/
    const rainLayer = document.getElementById("rainLayer");
    function spawnRain(type){
      const count = 48; // lluvia abundante
      for(let i=0;i<count;i++){
        const d = document.createElement("div");
        d.className = "drop";
        const left = Math.random()*100;
        const dur  = 2.1 + Math.random()*1.9;
        const delay= Math.random()*0.28;
        const sc   = 0.75 + Math.random()*1.25;
        const rot  = (Math.random()*160 - 80).toFixed(1) + "deg";
        d.style.left = left + "%";
        d.style.animationDuration = dur + "s";
        d.style.animationDelay = delay + "s";
        d.style.setProperty("--rot", rot);
        d.style.setProperty("--sc", sc);
        d.style.fontSize = (18 + Math.random()*18).toFixed(0) + "px";
        d.textContent = (type === "boy")
          ? (Math.random() > 0.25 ? "üéà" : "üíô")
          : (Math.random() > 0.25 ? "üíñ" : "üíó");
        rainLayer.appendChild(d);
        setTimeout(()=> d.remove(), (dur + delay + 0.6)*1000);
      }
    }

    /**********************
     * Acciones
     **********************/
    function openMaps(){
      window.open(MAPS_URL, "_blank");
    }

    function openWhatsApp(){
      const phone = RSVP_PHONE.replace(/[^\d]/g,"");
      const text = encodeURIComponent(RSVP_MESSAGE);
      window.open(`https://wa.me/${phone}?text=${text}`, "_blank");
    }

    /**********************
     * ‚ÄúAbrir invitaci√≥n‚Äù:
     * - NO queda fijo
     * - al tocar, se oculta y hace scroll al √°rea central (donde est√° la tarjeta)
     **********************/
    const gate = document.getElementById("gate");
    const stage = document.getElementById("stage");

    function openInvitation(){
      // ocultar la capa gate
      gate.classList.add("hidden");

      // scroll para que el bot√≥n ya no se vea (como pediste)
      // mueve la vista hacia el centro donde est√° la tarjeta
      const y = stage.getBoundingClientRect().height * 0.28;
      window.scrollTo({ top: window.scrollY + y, behavior: "smooth" });

      // peque√±o ‚Äúsparkle‚Äù (lluvia suave)
      spawnRain("girl");
      setTimeout(()=> spawnRain("boy"), 220);
    }

    /**********************
     * Contador real en tiempo real
     **********************/
    const countdownText = document.getElementById("countdownText");

    function startCountdown(){
      const target = new Date(EVENT_DATE).getTime();

      const tick = () => {
        const now = Date.now();
        let diff = Math.max(0, target - now);

        const days = Math.floor(diff / (1000*60*60*24)); diff -= days*(1000*60*60*24);
        const hrs  = Math.floor(diff / (1000*60*60));    diff -= hrs*(1000*60*60);
        const mins = Math.floor(diff / (1000*60));       diff -= mins*(1000*60);
        const secs = Math.floor(diff / 1000);

        countdownText.textContent =
          `‚è≥ Faltan ${days} d√≠as ${hrs}h ${mins}m ${secs}s`;
      };

      tick();
      setInterval(tick, 1000);
    }

    /**********************
     * Modal regalos
     **********************/
    const modal = document.getElementById("modal");
    const giftHotspot = document.getElementById("giftHotspot");
    const giftList = document.getElementById("giftList");
    const closeModal = document.getElementById("closeModal");

    function openGifts(){
      unlockAudio(); clickSound();
      modal.classList.add("open");
    }
    function closeGifts(){
      unlockAudio(); clickSound();
      modal.classList.remove("open");
    }

    /**********************
     * INIT
     **********************/
    window.addEventListener("DOMContentLoaded", ()=>{
      // llenar regalos
      giftList.innerHTML = "";
      GIFTS.forEach(g=>{
        const li = document.createElement("li");
        li.textContent = g;
        giftList.appendChild(li);
      });

      startCountdown();

      bindTap(document.getElementById("openInvite"), openInvitation);
      bindTap(document.getElementById("btnBoy"),  ()=>{ spawnRain("boy");  });
      bindTap(document.getElementById("btnGirl"), ()=>{ spawnRain("girl"); });
      bindTap(document.getElementById("btnMaps"), openMaps);
      bindTap(document.getElementById("btnRsvp"), openWhatsApp);

      giftHotspot.addEventListener("click", openGifts, {passive:true});
      closeModal.addEventListener("click", closeGifts, {passive:true});
      modal.addEventListener("click", (e)=>{ if(e.target === modal) closeGifts(); }, {passive:true});
    });
  </script>
</body>
</html>